(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),BackgroundPort=function(){function e(){_classCallCheck(this,e),e.bindInstanceMethods(this),this.name=this._name,this.config=this._config}return _createClass(e,[{key:"main",value:function(){var e=vamtiger._backgroundPort?vamtiger._backgroundPort:chrome.runtime.connect(this.config);return e}},{key:"_name",get:function(){var e="vamtiger";return e}},{key:"_config",get:function(){var e={name:this.name};return e}}],[{key:"bindInstanceMethods",value:function(n){var t=this,r=Object.getOwnPropertyNames(this.prototype);e.regex=e._regex,r.forEach(function(r){e.regex.ignoreBind.test(r)||(t.prototype[r]=n[r].bind(n))})}},{key:"_regex",get:function(){var e={ignoreBind:/^(?:bindInstanceMethods|_\w+)$/};return e}}]),e}(),backgroundPort=new BackgroundPort;exports["default"]=backgroundPort.main;

},{}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),StrangerButton=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"main",value:function(e){var n=vamtiger.select.newElement("\n            <button>"+e+"</button>\n            ");return n}}]),e}(),stranger=new StrangerButton;exports["default"]=stranger.main;

},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_BackgroundPort=require("./BackgroundPort"),_BackgroundPort2=_interopRequireDefault(_BackgroundPort),_StrangerButton=require("./StrangerButton"),_StrangerButton2=_interopRequireDefault(_StrangerButton),Get=function(){function t(){_classCallCheck(this,t),this.backgroundPort=this._backgroundPort}return _createClass(t,[{key:"_backgroundPort",get:function(){return _BackgroundPort2["default"]}},{key:"strangerButton",get:function(){return _StrangerButton2["default"]}}]),t}();exports["default"]=Get;

},{"./BackgroundPort":1,"./StrangerButton":2}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),HandleKeyDown=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"main",value:function(e){e.which&&console.log(vamtiger.select.inputText)}}]),e}(),handleKeyDown=new HandleKeyDown;exports["default"]=handleKeyDown.main;

},{}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),HandleLoad=function(){function e(){_classCallCheck(this,e),e.bindInstanceMethods(this)}return _createClass(e,[{key:"main",value:function(e){vamtiger.set.backgroundPort()}}],[{key:"bindInstanceMethods",value:function(n){var t=this,a=Object.getOwnPropertyNames(this.prototype);e.regex=e._regex,a.forEach(function(a){e.regex.ignoreBind.test(a)||(t.prototype[a]=n[a].bind(n))})}},{key:"_regex",get:function(){var e={ignoreBind:/^(?:bindInstanceMethods|_\w+)$/};return e}}]),e}(),handleLoad=new HandleLoad;exports["default"]=handleLoad.main;

},{}],6:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),HandlePortMessage=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"main",value:function(e){var n=e.action.split(vamtiger.regex.dot).reduce(function(e,n){return e[n]},vamtiger);n(e)}}]),e}(),handlePortMessage=new HandlePortMessage;exports["default"]=handlePortMessage.main;

},{}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,a,t){return a&&e(n.prototype,a),t&&e(n,t),n}}(),_HandleLoad=require("./HandleLoad"),_HandleLoad2=_interopRequireDefault(_HandleLoad),_HandlePortMessage=require("./HandlePortMessage"),_HandlePortMessage2=_interopRequireDefault(_HandlePortMessage),_HandleKeyDown=require("./HandleKeyDown"),_HandleKeyDown2=_interopRequireDefault(_HandleKeyDown),Handle=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"load",get:function(){return _HandleLoad2["default"]}},{key:"portMessage",get:function(){return _HandlePortMessage2["default"]}},{key:"keyDown",get:function(){return _HandleKeyDown2["default"]}}]),e}();exports["default"]=Handle;

},{"./HandleKeyDown":4,"./HandleLoad":5,"./HandlePortMessage":6}],8:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),Answer=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"main",value:function(e,n,r){var t=n;vamtiger.select.strangers.forEach(function(n){n.innerHTML===e.stranger&&(t=r)}),t(e.stranger)}}]),e}();exports["default"]=Answer.main;

},{}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_MustTheStrangerBeAcknowledged=require("./MustTheStrangerBeAcknowledged"),_MustTheStrangerBeAcknowledged2=_interopRequireDefault(_MustTheStrangerBeAcknowledged),Question=function(){function e(){_classCallCheck(this,e),e.bindInstanceMethods(this)}return _createClass(e,[{key:"main",value:function(e,n){var t=this;return new Promise(function(r,o){t[e](n,r,o)})}},{key:"Must the stranger be acknowledged?",value:function(e,n,t){return(0,_MustTheStrangerBeAcknowledged2["default"])(e,n,t)}}],[{key:"bindInstanceMethods",value:function(n){var t=this,r=Object.getOwnPropertyNames(this.prototype);e.regex=e._regex,r.forEach(function(r){e.regex.ignoreBind.test(r)||(t.prototype[r]=n[r].bind(n))})}},{key:"_regex",get:function(){var e={ignoreBind:/^(?:bindInstanceMethods|_\w+)$/};return e}}]),e}(),question=new Question;exports["default"]=question.main;

},{"./MustTheStrangerBeAcknowledged":8}],10:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Regex=function(){function e(){_classCallCheck(this,e),this.dot=this._dot}return _createClass(e,[{key:"_dot",get:function(){var e=/\./;return e}}]),e}();exports["default"]=Regex;

},{}],11:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Select=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"newElement",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}},{key:"strangers",get:function(){return Array.from(document.querySelectorAll(".stranger > button"))}},{key:"strangerSection",get:function(){return document.querySelector(".stranger")}},{key:"inputText",get:function(){return document.querySelector(".chatInput")}}]),e}();exports["default"]=Select;

},{}],12:[function(require,module,exports){
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),BackgroundPort=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"main",value:function(){vamtiger._backgroundPort=vamtiger.get.backgroundPort(),vamtiger._backgroundPort.onMessage.addListener(vamtiger.handle.portMessage),vamtiger._backgroundPort.postMessage({action:"set.socket"})}}]),e}(),backgroundPort=new BackgroundPort;exports["default"]=backgroundPort.main;

},{}],13:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_BackgroundPort=require("./BackgroundPort"),_BackgroundPort2=_interopRequireDefault(_BackgroundPort),Setter=function(){function e(){_classCallCheck(this,e),this.backgroundPort=this._backgroundPort}return _createClass(e,[{key:"_backgroundPort",get:function(){return _BackgroundPort2["default"]}}]),e}();exports["default"]=Setter;

},{"./BackgroundPort":12}],14:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),UpdateStranger=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"main",value:function(e){vamtiger.question("Must the stranger be acknowledged?",e.data).then(vamtiger.get.strangerButton).then(function(e){return vamtiger.select.strangerSection.appendChild(e)})["catch"](vamtiger.ignore)}}]),e}(),updatStranger=new UpdateStranger;exports["default"]=updatStranger.main;

},{}],15:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_UpdateStranger=require("./UpdateStranger"),_UpdateStranger2=_interopRequireDefault(_UpdateStranger),Update=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"stranger",get:function(){return _UpdateStranger2["default"]}}]),e}();exports["default"]=Update;

},{"./UpdateStranger":14}],16:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_Handle=require("./Handle"),_Handle2=_interopRequireDefault(_Handle),_Set=require("./Set"),_Set2=_interopRequireDefault(_Set),_Get=require("./Get"),_Get2=_interopRequireDefault(_Get),_Regex=require("./Regex"),_Regex2=_interopRequireDefault(_Regex),_Update=require("./Update"),_Update2=_interopRequireDefault(_Update),_Select=require("./Select"),_Select2=_interopRequireDefault(_Select),_Question=require("./Question"),_Question2=_interopRequireDefault(_Question),VamtigerChatRoomWindow=function(){function e(){_classCallCheck(this,e),this.handle=this._handle,this.set=this._set,this.get=this._get,this.regex=this._regex,this.update=this._update,this.select=this._select,this._backgroundPort=null,addEventListener("load",this.handle.load),addEventListener("keydown",this.handle.keyDown)}return _createClass(e,[{key:"ignore",value:function(){}},{key:"_handle",get:function(){return new _Handle2["default"]}},{key:"_set",get:function(){return new _Set2["default"]}},{key:"_get",get:function(){return new _Get2["default"]}},{key:"_regex",get:function(){return new _Regex2["default"]}},{key:"_update",get:function(){return new _Update2["default"]}},{key:"_select",get:function(){return new _Select2["default"]}},{key:"question",get:function(){return _Question2["default"]}}]),e}();exports["default"]=VamtigerChatRoomWindow;

},{"./Get":3,"./Handle":7,"./Question":9,"./Regex":10,"./Select":11,"./Set":13,"./Update":15}],17:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _VamtigerChatRoomWindow=require("./VamtigerChatRoomWindow"),_VamtigerChatRoomWindow2=_interopRequireDefault(_VamtigerChatRoomWindow);window.vamtiger=new _VamtigerChatRoomWindow2["default"];

},{"./VamtigerChatRoomWindow":16}]},{},[17])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvR2V0L0JhY2tncm91bmRQb3J0L2luZGV4LmpzIiwiL1VzZXJzL3ZhbXRpZ2VyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9TdHVkZW50L2Fub255LWNoYXQtdWkvQXBwbGljYXRpb24vV2luZG93L0pzL1NvdXJjZS9WYW10aWdlckNoYXRSb29tV2luZG93L0dldC9TdHJhbmdlckJ1dHRvbi9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9HZXQvaW5kZXguanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvSGFuZGxlL0hhbmRsZUtleURvd24vaW5kZXguanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvSGFuZGxlL0hhbmRsZUxvYWQvaW5kZXguanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvSGFuZGxlL0hhbmRsZVBvcnRNZXNzYWdlL2luZGV4LmpzIiwiL1VzZXJzL3ZhbXRpZ2VyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9TdHVkZW50L2Fub255LWNoYXQtdWkvQXBwbGljYXRpb24vV2luZG93L0pzL1NvdXJjZS9WYW10aWdlckNoYXRSb29tV2luZG93L0hhbmRsZS9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9RdWVzdGlvbi9NdXN0VGhlU3RyYW5nZXJCZUFja25vd2xlZGdlZC9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9RdWVzdGlvbi9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9SZWdleC9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9TZWxlY3QvaW5kZXguanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvU2V0L0JhY2tncm91bmRQb3J0L2luZGV4LmpzIiwiL1VzZXJzL3ZhbXRpZ2VyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9TdHVkZW50L2Fub255LWNoYXQtdWkvQXBwbGljYXRpb24vV2luZG93L0pzL1NvdXJjZS9WYW10aWdlckNoYXRSb29tV2luZG93L1NldC9pbmRleC5qcyIsIi9Vc2Vycy92YW10aWdlci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvU3R1ZGVudC9hbm9ueS1jaGF0LXVpL0FwcGxpY2F0aW9uL1dpbmRvdy9Kcy9Tb3VyY2UvVmFtdGlnZXJDaGF0Um9vbVdpbmRvdy9VcGRhdGUvVXBkYXRlU3RyYW5nZXIvaW5kZXguanMiLCIvVXNlcnMvdmFtdGlnZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL1N0dWRlbnQvYW5vbnktY2hhdC11aS9BcHBsaWNhdGlvbi9XaW5kb3cvSnMvU291cmNlL1ZhbXRpZ2VyQ2hhdFJvb21XaW5kb3cvVXBkYXRlL2luZGV4LmpzIiwiL1VzZXJzL3ZhbXRpZ2VyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9TdHVkZW50L2Fub255LWNoYXQtdWkvQXBwbGljYXRpb24vV2luZG93L0pzL1NvdXJjZS9WYW10aWdlckNoYXRSb29tV2luZG93L2luZGV4LmpzIiwiL1VzZXJzL3ZhbXRpZ2VyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9TdHVkZW50L2Fub255LWNoYXQtdWkvQXBwbGljYXRpb24vV2luZG93L0pzL1NvdXJjZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtvYkNBTSwwQkFDRixRQUFBLEtBQWMsZ0JBQUEsS0FBQSxHQUNWLEVBQWUsb0JBQW9CLE1BRW5DLEtBQUssS0FBTyxLQUFLLE1BQ2pCLEtBQUssT0FBUyxLQUFLLDREQUluQixHQUFJLEdBQTRCLFNBQVMsZ0JBQ0MsU0FBUyxnQkFBL0MsT0FBTyxRQUFRLFFBQVEsS0FBSyxPQUVoQyxPQUFPLGlDQUlQLEdBQUksR0FBTyxVQUVYLE9BQU8sbUNBSVAsR0FBSSxJQUNBLEtBQU0sS0FBSyxLQUdmLE9BQU8saURBR2dCLEdBQVUsR0FBQSxHQUFBLEtBQzdCLEVBQWdCLE9BQU8sb0JBQW9CLEtBQUssVUFFcEQsR0FBZSxNQUFRLEVBQWUsT0FFdEMsRUFBYyxRQUFR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QUlQLE1BQUEsWUFBQSx1Q0FJTzs7O3VGQ3REZixHQUFBLHlCQUFBLFFBQUEsb0dBRUEsUUFBTyxTQUFXLEdBQUEsMEJBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2xhc3MgQmFja2dyb3VuZFBvcnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBCYWNrZ3JvdW5kUG9ydC5iaW5kSW5zdGFuY2VNZXRob2RzKHRoaXMpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuX25hbWU7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5fY29uZmlnO1xuICAgIH1cblxuICAgIG1haW4oKSB7XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kUG9ydENvbm5lY3Rpb24gPSAhdmFtdGlnZXIuX2JhY2tncm91bmRQb3J0ID9cbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLmNvbm5lY3QodGhpcy5jb25maWcpIDogdmFtdGlnZXIuX2JhY2tncm91bmRQb3J0O1xuXG4gICAgICAgIHJldHVybiBiYWNrZ3JvdW5kUG9ydENvbm5lY3Rpb247XG4gICAgfVxuXG4gICAgZ2V0IF9uYW1lKCkge1xuICAgICAgICB2YXIgbmFtZSA9IFwidmFtdGlnZXJcIjtcblxuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBnZXQgX2NvbmZpZygpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgc3RhdGljIGJpbmRJbnN0YW5jZU1ldGhvZHMoaW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIHByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLnByb3RvdHlwZSk7XG5cbiAgICAgICAgQmFja2dyb3VuZFBvcnQucmVnZXggPSBCYWNrZ3JvdW5kUG9ydC5fcmVnZXg7XG5cbiAgICAgICAgcHJvcGVydHlOYW1lcy5mb3JFYWNoKChwcm9wZXJ5TmFtZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFCYWNrZ3JvdW5kUG9ydC5yZWdleC5pZ25vcmVCaW5kLnRlc3QocHJvcGVyeU5hbWUpKVxuICAgICAgICAgICAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnlOYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlW3Byb3BlcnlOYW1lXS5iaW5kKGluc3RhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBfcmVnZXgoKSB7XG4gICAgICAgIHZhciByZWdleCA9IHtcbiAgICAgICAgICAgIGlnbm9yZUJpbmQ6IC9eKD86YmluZEluc3RhbmNlTWV0aG9kc3xfXFx3KykkL1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiByZWdleDtcbiAgICB9XG59XG5cbnZhciBiYWNrZ3JvdW5kUG9ydCA9IG5ldyBCYWNrZ3JvdW5kUG9ydCgpO1xuXG5leHBvcnQgZGVmYXVsdCBiYWNrZ3JvdW5kUG9ydC5tYWluO1xuIiwiY2xhc3MgU3RyYW5nZXJCdXR0b24ge1xuICAgIG1haW4oc3RyYW5nZXIpIHtcbiAgICAgICAgdmFyIHN0cmFuZ2VyQnV0dG9uID0gdmFtdGlnZXIuc2VsZWN0Lm5ld0VsZW1lbnQoYFxuICAgICAgICAgICAgPGJ1dHRvbj4ke3N0cmFuZ2VyfTwvYnV0dG9uPlxuICAgICAgICAgICAgYCk7XG5cbiAgICAgICAgcmV0dXJuIHN0cmFuZ2VyQnV0dG9uO1xuICAgIH1cbn1cblxudmFyIHN0cmFuZ2VyID0gbmV3IFN0cmFuZ2VyQnV0dG9uKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmFuZ2VyLm1haW47XG4iLCJpbXBvcnQgYmFja2dyb3VuZFBvcnQgZnJvbSBcIi4vQmFja2dyb3VuZFBvcnRcIjtcbmltcG9ydCBzdHJhbmdlckJ1dHRvbiBmcm9tIFwiLi9TdHJhbmdlckJ1dHRvblwiO1xuXG5jbGFzcyBHZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJhY2tncm91bmRQb3J0ID0gdGhpcy5fYmFja2dyb3VuZFBvcnQ7XG4gICAgfVxuXG4gICAgZ2V0IF9iYWNrZ3JvdW5kUG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIGJhY2tncm91bmRQb3J0O1xuICAgIH1cblxuICAgIGdldCBzdHJhbmdlckJ1dHRvbigpIHtcbiAgICAgICAgcmV0dXJuIHN0cmFuZ2VyQnV0dG9uO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2V0O1xuIiwiY2xhc3MgSGFuZGxlS2V5RG93biB7XG4gICAgbWFpbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQud2hpY2gpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2YW10aWdlci5zZWxlY3QuaW5wdXRUZXh0KTtcbiAgICB9XG59XG5cbnZhciBoYW5kbGVLZXlEb3duID0gbmV3IEhhbmRsZUtleURvd24oKTtcblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlS2V5RG93bi5tYWluO1xuIiwiY2xhc3MgSGFuZGxlTG9hZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIEhhbmRsZUxvYWQuYmluZEluc3RhbmNlTWV0aG9kcyh0aGlzKTtcbiAgICB9XG5cbiAgICBtYWluKGV2ZW50KSB7XG4gICAgICAgIHZhbXRpZ2VyLnNldC5iYWNrZ3JvdW5kUG9ydCgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBiaW5kSW5zdGFuY2VNZXRob2RzKGluc3RhbmNlKSB7XG4gICAgICAgIHZhciBwcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5wcm90b3R5cGUpO1xuXG4gICAgICAgIEhhbmRsZUxvYWQucmVnZXggPSBIYW5kbGVMb2FkLl9yZWdleDtcblxuICAgICAgICBwcm9wZXJ0eU5hbWVzLmZvckVhY2goKHByb3BlcnlOYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAoIUhhbmRsZUxvYWQucmVnZXguaWdub3JlQmluZC50ZXN0KHByb3BlcnlOYW1lKSlcbiAgICAgICAgICAgICAgICB0aGlzLnByb3RvdHlwZVtwcm9wZXJ5TmFtZV0gPVxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVtwcm9wZXJ5TmFtZV0uYmluZChpbnN0YW5jZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgX3JlZ2V4KCkge1xuICAgICAgICB2YXIgcmVnZXggPSB7XG4gICAgICAgICAgICBpZ25vcmVCaW5kOiAvXig/OmJpbmRJbnN0YW5jZU1ldGhvZHN8X1xcdyspJC9cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcmVnZXg7XG4gICAgfVxufVxuXG52YXIgaGFuZGxlTG9hZCA9IG5ldyBIYW5kbGVMb2FkKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZUxvYWQubWFpbjtcbiIsImNsYXNzIEhhbmRsZVBvcnRNZXNzYWdlIHtcbiAgICBtYWluKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2VBY3Rpb24gPSBtZXNzYWdlLmFjdGlvbi5zcGxpdCh2YW10aWdlci5yZWdleC5kb3QpLnJlZHVjZShcbiAgICAgICAgICAgIChyZWN1cnNpdmVBY3Rpb24sIGFjdGlvbikgPT4gcmVjdXJzaXZlQWN0aW9uW2FjdGlvbl0sIHZhbXRpZ2VyKTtcblxuICAgICAgICBtZXNzYWdlQWN0aW9uKG1lc3NhZ2UpO1xuICAgIH1cbn1cblxudmFyIGhhbmRsZVBvcnRNZXNzYWdlID0gbmV3IEhhbmRsZVBvcnRNZXNzYWdlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZVBvcnRNZXNzYWdlLm1haW47XG4iLCJpbXBvcnQgaGFuZGxlTG9hZCBmcm9tIFwiLi9IYW5kbGVMb2FkXCI7XG5pbXBvcnQgaGFuZGxlUG9ydE1lc3NhZ2UgZnJvbSBcIi4vSGFuZGxlUG9ydE1lc3NhZ2VcIjtcbmltcG9ydCBoYW5kbGVLZXlEb3duIGZyb20gXCIuL0hhbmRsZUtleURvd25cIjtcblxuY2xhc3MgSGFuZGxlIHtcbiAgICBnZXQgbG9hZCgpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUxvYWQ7XG4gICAgfVxuXG4gICAgZ2V0IHBvcnRNZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlUG9ydE1lc3NhZ2VcbiAgICB9XG5cbiAgICBnZXQgIGtleURvd24oKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVLZXlEb3duO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSGFuZGxlO1xuIiwiY2xhc3MgQW5zd2VyIHtcbiAgICBzdGF0aWMgbWFpbihkYXRhLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGFuc3dlciA9IHJlc29sdmU7XG5cbiAgICAgICAgdmFtdGlnZXIuc2VsZWN0LnN0cmFuZ2Vycy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGlmIChidXR0b24uaW5uZXJIVE1MPT09ZGF0YS5zdHJhbmdlcikgYW5zd2VyID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGFuc3dlcihkYXRhLnN0cmFuZ2VyKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFuc3dlci5tYWluO1xuIiwiaW1wb3J0IG11c3RUaGVTdHJhbmdlckJlQWNrbm93bGVkZ2VkIGZyb20gXCIuL011c3RUaGVTdHJhbmdlckJlQWNrbm93bGVkZ2VkXCI7XG5cbmNsYXNzIFF1ZXN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgUXVlc3Rpb24uYmluZEluc3RhbmNlTWV0aG9kcyh0aGlzKTtcbiAgICB9XG5cbiAgICBtYWluKHF1ZXN0aW9uLCBkYXRhKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzW3F1ZXN0aW9uXShkYXRhLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBcIk11c3QgdGhlIHN0cmFuZ2VyIGJlIGFja25vd2xlZGdlZD9cIihkYXRhLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIG11c3RUaGVTdHJhbmdlckJlQWNrbm93bGVkZ2VkKGRhdGEsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGJpbmRJbnN0YW5jZU1ldGhvZHMoaW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIHByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLnByb3RvdHlwZSk7XG5cbiAgICAgICAgUXVlc3Rpb24ucmVnZXggPSBRdWVzdGlvbi5fcmVnZXg7XG5cbiAgICAgICAgcHJvcGVydHlOYW1lcy5mb3JFYWNoKChwcm9wZXJ5TmFtZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFRdWVzdGlvbi5yZWdleC5pZ25vcmVCaW5kLnRlc3QocHJvcGVyeU5hbWUpKVxuICAgICAgICAgICAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnlOYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlW3Byb3BlcnlOYW1lXS5iaW5kKGluc3RhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBfcmVnZXgoKSB7XG4gICAgICAgIHZhciByZWdleCA9IHtcbiAgICAgICAgICAgIGlnbm9yZUJpbmQ6IC9eKD86YmluZEluc3RhbmNlTWV0aG9kc3xfXFx3KykkL1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiByZWdleDtcbiAgICB9XG59XG5cbnZhciBxdWVzdGlvbiA9IG5ldyBRdWVzdGlvbigpO1xuXG5leHBvcnQgZGVmYXVsdCBxdWVzdGlvbi5tYWluO1xuIiwiY2xhc3MgUmVnZXgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRvdCA9IHRoaXMuX2RvdDtcbiAgICB9XG5cbiAgICBnZXQgX2RvdCgpIHtcbiAgICAgICAgdmFyIGRvdCA9IC9cXC4vO1xuXG4gICAgICAgIHJldHVybiBkb3Q7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWdleDtcbiIsImNsYXNzIFNlbGVjdCB7XG4gICAgZ2V0IHN0cmFuZ2VycygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdHJhbmdlciA+IGJ1dHRvblwiKSk7XG4gICAgfVxuXG4gICAgZ2V0IHN0cmFuZ2VyU2VjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RyYW5nZXJcIik7XG4gICAgfVxuXG4gICAgZ2V0IGlucHV0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdElucHV0XCIpO1xuICAgIH1cblxuICAgIG5ld0VsZW1lbnQoaW5uZXJIdG1sKSB7XG4gICAgICAgIHZhciBlbGVtZW50Q3JlYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgZWxlbWVudENyZWF0b3IuaW5uZXJIVE1MID0gaW5uZXJIdG1sO1xuXG4gICAgICAgIHJldHVybiBlbGVtZW50Q3JlYXRvci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdDtcbiIsImNsYXNzIEJhY2tncm91bmRQb3J0IHtcbiAgICBtYWluKCkge1xuICAgICAgICB2YW10aWdlci5fYmFja2dyb3VuZFBvcnQgPSB2YW10aWdlci5nZXQuYmFja2dyb3VuZFBvcnQoKTtcblxuICAgICAgICB2YW10aWdlci5fYmFja2dyb3VuZFBvcnQub25NZXNzYWdlLmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgdmFtdGlnZXIuaGFuZGxlLnBvcnRNZXNzYWdlKTtcblxuICAgICAgICB2YW10aWdlci5fYmFja2dyb3VuZFBvcnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgYWN0aW9uOiBcInNldC5zb2NrZXRcIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbnZhciBiYWNrZ3JvdW5kUG9ydCA9IG5ldyBCYWNrZ3JvdW5kUG9ydDtcblxuZXhwb3J0IGRlZmF1bHQgYmFja2dyb3VuZFBvcnQubWFpbjtcbiIsImltcG9ydCBiYWNrZ3JvdW5kUG9ydCBmcm9tIFwiLi9CYWNrZ3JvdW5kUG9ydFwiO1xuXG5jbGFzcyBTZXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJhY2tncm91bmRQb3J0ID0gdGhpcy5fYmFja2dyb3VuZFBvcnQ7XG4gICAgfVxuXG4gICAgZ2V0IF9iYWNrZ3JvdW5kUG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIGJhY2tncm91bmRQb3J0O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2V0dGVyO1xuIiwiY2xhc3MgVXBkYXRlU3RyYW5nZXIge1xuICAgIG1haW4obWVzc2FnZSkge1xuICAgICAgICB2YW10aWdlci5xdWVzdGlvbihcIk11c3QgdGhlIHN0cmFuZ2VyIGJlIGFja25vd2xlZGdlZD9cIiwgbWVzc2FnZS5kYXRhKVxuICAgICAgICAgICAgLnRoZW4odmFtdGlnZXIuZ2V0LnN0cmFuZ2VyQnV0dG9uKVxuICAgICAgICAgICAgLnRoZW4oKHN0cmFuZ2VyQnV0dG9uKSA9PlxuICAgICAgICAgICAgICAgIHZhbXRpZ2VyLnNlbGVjdC5zdHJhbmdlclNlY3Rpb24uYXBwZW5kQ2hpbGQoc3RyYW5nZXJCdXR0b24pKVxuICAgICAgICAgICAgLmNhdGNoKHZhbXRpZ2VyLmlnbm9yZSk7XG4gICAgfVxufVxuXG52YXIgdXBkYXRTdHJhbmdlciA9IG5ldyBVcGRhdGVTdHJhbmdlcigpO1xuXG5leHBvcnQgZGVmYXVsdCB1cGRhdFN0cmFuZ2VyLm1haW47XG4iLCJpbXBvcnQgc3RyYW5nZXIgZnJvbSBcIi4vVXBkYXRlU3RyYW5nZXJcIjtcblxuY2xhc3MgVXBkYXRlIHtcbiAgICBnZXQgc3RyYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiBzdHJhbmdlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVwZGF0ZTtcbiIsImltcG9ydCBIYW5kbGUgZnJvbSBcIi4vSGFuZGxlXCI7XG5pbXBvcnQgU2V0dGVyIGZyb20gXCIuL1NldFwiO1xuaW1wb3J0IEdldCBmcm9tIFwiLi9HZXRcIjtcbmltcG9ydCBSZWdleCBmcm9tIFwiLi9SZWdleFwiO1xuaW1wb3J0IFVwZGF0ZSBmcm9tIFwiLi9VcGRhdGVcIjtcbmltcG9ydCBTZWxlY3QgZnJvbSBcIi4vU2VsZWN0XCI7XG5pbXBvcnQgcXVlc3Rpb24gZnJvbSBcIi4vUXVlc3Rpb25cIjtcblxuY2xhc3MgVmFtdGlnZXJDaGF0Um9vbVdpbmRvdyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlID0gdGhpcy5faGFuZGxlO1xuICAgICAgICB0aGlzLnNldCA9IHRoaXMuX3NldDtcbiAgICAgICAgdGhpcy5nZXQgPSB0aGlzLl9nZXQ7XG4gICAgICAgIHRoaXMucmVnZXggPSB0aGlzLl9yZWdleDtcbiAgICAgICAgdGhpcy51cGRhdGUgPSB0aGlzLl91cGRhdGU7XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gdGhpcy5fc2VsZWN0O1xuXG4gICAgICAgIHRoaXMuX2JhY2tncm91bmRQb3J0ID0gbnVsbDtcblxuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzLmhhbmRsZS5sb2FkKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGUua2V5RG93bik7XG4gICAgfVxuXG4gICAgaWdub3JlKCkge31cblxuICAgIGdldCBfaGFuZGxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZSgpO1xuICAgIH1cblxuICAgIGdldCBfc2V0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNldHRlcigpO1xuICAgIH1cblxuICAgIGdldCBfZ2V0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEdldCgpO1xuICAgIH1cblxuICAgIGdldCBfcmVnZXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnZXgoKTtcbiAgICB9XG5cbiAgICBnZXQgX3VwZGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBnZXQgX3NlbGVjdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3QoKTtcbiAgICB9XG5cbiAgICBnZXQgcXVlc3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBxdWVzdGlvbjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhbXRpZ2VyQ2hhdFJvb21XaW5kb3c7XG4iLCJpbXBvcnQgVmFtdGlnZXIgZnJvbSBcIi4vVmFtdGlnZXJDaGF0Um9vbVdpbmRvd1wiO1xuXG53aW5kb3cudmFtdGlnZXIgPSBuZXcgVmFtdGlnZXIoKTtcbiJdfQ==
